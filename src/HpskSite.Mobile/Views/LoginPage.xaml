<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HpskSite.Mobile.ViewModels"
             x:Class="HpskSite.Mobile.Views.LoginPage"
             x:DataType="viewmodels:LoginViewModel"
             Title="{Binding Title}"
             BackgroundColor="{StaticResource OffBlack}">

    <ScrollView x:Name="MainContent">
        <VerticalStackLayout Padding="24" Spacing="24" VerticalOptions="Center">

            <!-- Logo/Header Section -->
            <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                <!-- Logo Circle -->
                <Border WidthRequest="80"
                        HeightRequest="80"
                        StrokeShape="RoundRectangle 40"
                        Stroke="Transparent"
                        BackgroundColor="{StaticResource Primary}"
                        HorizontalOptions="Center">
                    <Label Text="ðŸŽ¯"
                           FontSize="40"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
                </Border>

                <Label Text="Pistol.nu"
                       FontSize="36"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource Primary}" />

                <Label Text="TrÃ¤ningsmatch"
                       FontSize="16"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource Gray300}" />
            </VerticalStackLayout>

            <!-- Login Card -->
            <Border StrokeShape="RoundRectangle 12"
                    Stroke="Transparent"
                    BackgroundColor="{StaticResource CardBackgroundDark}"
                    Padding="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,4" Radius="12" Opacity="0.15"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="0">

                    <!-- Card Header -->
                    <Border BackgroundColor="{StaticResource Gray600}"
                            StrokeThickness="0"
                            Padding="16">
                        <HorizontalStackLayout Spacing="8" HorizontalOptions="Center">
                            <Label Text="ðŸ”"
                                   FontSize="18"
                                   VerticalOptions="Center" />
                            <Label Text="Logga in"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center"
                                   TextColor="{StaticResource White}" />
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Divider -->
                    <BoxView HeightRequest="1"
                             Color="{StaticResource Gray600}" />

                    <!-- Card Body -->
                    <VerticalStackLayout Padding="20" Spacing="16">

                        <!-- Error Message -->
                        <Border BackgroundColor="#FEE2E2"
                                Stroke="{StaticResource Danger}"
                                StrokeShape="RoundRectangle 8"
                                Padding="12"
                                IsVisible="{Binding HasError}">
                            <HorizontalStackLayout Spacing="8">
                                <Label Text="âš ï¸"
                                       FontSize="16"
                                       VerticalOptions="Center" />
                                <Label Text="{Binding ErrorMessage}"
                                       TextColor="{StaticResource Danger}"
                                       VerticalOptions="Center" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Email Field -->
                        <VerticalStackLayout Spacing="6">
                            <HorizontalStackLayout Spacing="6">
                                <Label Text="âœ‰ï¸"
                                       FontSize="14"
                                       VerticalOptions="Center" />
                                <Label Text="E-post"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"
                                       TextColor="{StaticResource Gray200}" />
                                <Label Text="*"
                                       FontSize="14"
                                       TextColor="{StaticResource Danger}" />
                            </HorizontalStackLayout>
                            <Border StrokeShape="RoundRectangle 8"
                                    Stroke="{StaticResource Gray500}"
                                    BackgroundColor="{StaticResource Gray600}"
                                    Padding="12,0"
                                    HeightRequest="48">
                                <Entry Placeholder="din@email.com"
                                       Text="{Binding Email}"
                                       Keyboard="Email"
                                       ReturnType="Next"
                                       VerticalOptions="Center" />
                            </Border>
                        </VerticalStackLayout>

                        <!-- Password Field -->
                        <VerticalStackLayout Spacing="6">
                            <HorizontalStackLayout Spacing="6">
                                <Label Text="ðŸ”’"
                                       FontSize="14"
                                       VerticalOptions="Center" />
                                <Label Text="LÃ¶senord"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"
                                       TextColor="{StaticResource Gray200}" />
                                <Label Text="*"
                                       FontSize="14"
                                       TextColor="{StaticResource Danger}" />
                            </HorizontalStackLayout>
                            <Border StrokeShape="RoundRectangle 8"
                                    Stroke="{StaticResource Gray500}"
                                    BackgroundColor="{StaticResource Gray600}"
                                    Padding="12,0"
                                    HeightRequest="48">
                                <Entry Placeholder="********"
                                       Text="{Binding Password}"
                                       IsPassword="True"
                                       ReturnType="Done"
                                       VerticalOptions="Center" />
                            </Border>
                        </VerticalStackLayout>

                        <!-- Divider -->
                        <BoxView HeightRequest="1"
                                 Color="{StaticResource Gray600}"
                                 Margin="0,8" />

                        <!-- Login Button -->
                        <Button Text="âž¡ï¸ Logga in"
                                Command="{Binding LoginCommand}"
                                BackgroundColor="{StaticResource Primary}"
                                TextColor="White"
                                FontAttributes="Bold"
                                FontSize="16"
                                HeightRequest="50"
                                CornerRadius="8"
                                IsEnabled="{Binding IsNotBusy}" />

                        <!-- Loading Indicator -->
                        <ActivityIndicator IsRunning="{Binding IsBusy}"
                                           IsVisible="{Binding IsBusy}"
                                           Color="{StaticResource Primary}"
                                           HorizontalOptions="Center" />

                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- Footer Text -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="4">
                <Label Text="Har du inget konto?"
                       FontSize="12"
                       TextColor="{StaticResource Gray400}" />
                <Label Text="Registrera dig"
                       FontSize="12"
                       TextColor="{StaticResource Primary}"
                       TextDecorations="Underline">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnRegisterLinkTapped" />
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
