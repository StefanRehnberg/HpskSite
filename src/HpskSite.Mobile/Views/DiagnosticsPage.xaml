<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HpskSite.Mobile.ViewModels"
             x:Class="HpskSite.Mobile.Views.DiagnosticsPage"
             x:DataType="viewmodels:DiagnosticsViewModel"
             Title="{Binding Title}"
             BackgroundColor="{StaticResource OffBlack}"
             Shell.NavBarIsVisible="True">

    <Shell.BackButtonBehavior>
        <BackButtonBehavior IsVisible="True" />
    </Shell.BackButtonBehavior>

    <Grid RowDefinitions="Auto,*,Auto" Padding="16">

        <!-- Header with file info -->
        <Border Grid.Row="0"
                StrokeShape="RoundRectangle 8"
                Stroke="Transparent"
                BackgroundColor="{StaticResource CardBackgroundDark}"
                Padding="12"
                Margin="0,0,0,12">
            <Grid ColumnDefinitions="*,Auto">
                <VerticalStackLayout Grid.Column="0" Spacing="4">
                    <Label Text="Kraschloggar"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{StaticResource White}" />
                    <Label Text="{Binding LogFileSize, StringFormat='Filstorlek: {0}'}"
                           FontSize="13"
                           TextColor="{StaticResource Gray300}" />
                </VerticalStackLayout>
                <Button Grid.Column="1"
                        Text="Uppdatera"
                        Command="{Binding RefreshLogsCommand}"
                        BackgroundColor="{StaticResource Gray600}"
                        TextColor="{StaticResource White}"
                        FontSize="12"
                        HeightRequest="36"
                        Padding="12,0"
                        CornerRadius="8"
                        VerticalOptions="Center" />
            </Grid>
        </Border>

        <!-- Log content -->
        <Border Grid.Row="1"
                StrokeShape="RoundRectangle 8"
                Stroke="{StaticResource Gray600}"
                BackgroundColor="{StaticResource Gray900}"
                Padding="8">
            <ScrollView>
                <Label Text="{Binding LogContent}"
                       FontSize="11"
                       TextColor="{StaticResource Gray300}"
                       LineBreakMode="WordWrap" />
            </ScrollView>
        </Border>

        <!-- Action buttons -->
        <Grid Grid.Row="2"
              ColumnDefinitions="*,*,*"
              ColumnSpacing="8"
              Margin="0,12,0,0">
            <Button Grid.Column="0"
                    Text="Dela"
                    Command="{Binding ShareLogsCommand}"
                    BackgroundColor="{StaticResource Primary}"
                    TextColor="White"
                    FontAttributes="Bold"
                    HeightRequest="44"
                    CornerRadius="8"
                    IsEnabled="{Binding HasLogs}" />
            <Button Grid.Column="1"
                    Text="Kopiera"
                    Command="{Binding CopyLogsCommand}"
                    BackgroundColor="{StaticResource Gray600}"
                    TextColor="White"
                    FontAttributes="Bold"
                    HeightRequest="44"
                    CornerRadius="8"
                    IsEnabled="{Binding HasLogs}" />
            <Button Grid.Column="2"
                    Text="Rensa"
                    Command="{Binding ClearLogsCommand}"
                    BackgroundColor="{StaticResource Danger}"
                    TextColor="White"
                    FontAttributes="Bold"
                    HeightRequest="44"
                    CornerRadius="8"
                    IsEnabled="{Binding HasLogs}" />
        </Grid>

    </Grid>

</ContentPage>
