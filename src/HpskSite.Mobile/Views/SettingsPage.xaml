<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HpskSite.Mobile.ViewModels"
             x:Class="HpskSite.Mobile.Views.SettingsPage"
             x:DataType="viewmodels:SettingsViewModel"
             Title="{Binding Title}"
             BackgroundColor="{StaticResource OffBlack}">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <!-- Account Section Card -->
            <Border StrokeShape="RoundRectangle 12"
                    Stroke="Transparent"
                    BackgroundColor="{StaticResource CardBackgroundDark}"
                    Padding="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,2" Radius="8" Opacity="0.1"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="0">
                    <!-- Card Header -->
                    <Border BackgroundColor="{StaticResource Gray600}"
                            StrokeThickness="0"
                            Padding="16">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="&#x1F464;"
                                   FontSize="18"
                                   VerticalOptions="Center" />
                            <Label Text="Konto"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center"
                                   TextColor="{StaticResource White}" />
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Divider -->
                    <BoxView HeightRequest="1"
                             Color="{StaticResource Gray600}" />

                    <!-- Card Body -->
                    <VerticalStackLayout Padding="16" Spacing="12">
                        <Label Text="Du ar inloggad som medlem."
                               FontSize="14"
                               TextColor="{StaticResource Gray300}" />

                        <Button Text="&#x1F6AA; Logga ut"
                                Command="{Binding LogoutCommand}"
                                BackgroundColor="{StaticResource Danger}"
                                TextColor="White"
                                FontAttributes="Bold"
                                HeightRequest="48"
                                CornerRadius="8" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- Notifications Section Card -->
            <Border StrokeShape="RoundRectangle 12"
                    Stroke="Transparent"
                    BackgroundColor="{StaticResource CardBackgroundDark}"
                    Padding="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,2" Radius="8" Opacity="0.1"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="0">
                    <!-- Card Header -->
                    <Border BackgroundColor="{StaticResource Gray600}"
                            StrokeThickness="0"
                            Padding="16">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="&#x1F514;"
                                   FontSize="18"
                                   VerticalOptions="Center" />
                            <Label Text="Notiser"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center"
                                   TextColor="{StaticResource White}" />
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Divider -->
                    <BoxView HeightRequest="1"
                             Color="{StaticResource Gray600}" />

                    <!-- Card Body -->
                    <VerticalStackLayout Padding="16" Spacing="12">
                        <!-- Push notifications toggle -->
                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout Grid.Column="0" Spacing="4">
                                <Label Text="Push-notiser"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource White}" />
                                <Label Text="Fa notiser nar nya matcher skapas"
                                       FontSize="13"
                                       TextColor="{StaticResource Gray300}" />
                            </VerticalStackLayout>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding NotificationsEnabled}"
                                    OnColor="{StaticResource Primary}"
                                    VerticalOptions="Center" />
                        </Grid>

                        <!-- Notification preference picker (only shown when enabled) -->
                        <VerticalStackLayout Spacing="8"
                                           IsVisible="{Binding NotificationsEnabled}">
                            <BoxView HeightRequest="1"
                                     Color="{StaticResource Gray600}"
                                     Margin="0,4" />

                            <Label Text="Vilka matcher?"
                                   FontSize="14"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource Gray300}" />

                            <Border StrokeShape="RoundRectangle 8"
                                    Stroke="{StaticResource Gray600}"
                                    BackgroundColor="{StaticResource Gray600}"
                                    Padding="4">
                                <Picker ItemsSource="{Binding NotificationOptions}"
                                        SelectedIndex="{Binding SelectedNotificationIndex}"
                                        TextColor="{StaticResource White}"
                                        TitleColor="{StaticResource Gray400}"
                                        Title="Valj notistyp" />
                            </Border>

                            <Label FontSize="12"
                                   TextColor="{StaticResource Gray400}"
                                   LineBreakMode="WordWrap">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="'Endast oppna matcher' " FontAttributes="Bold" />
                                        <Span Text="notifierar endast for matcher som vem som helst kan ga med i." />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- App Info Card -->
            <Border StrokeShape="RoundRectangle 12"
                    Stroke="Transparent"
                    BackgroundColor="{StaticResource CardBackgroundDark}"
                    Padding="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,2" Radius="8" Opacity="0.1"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="0">
                    <!-- Card Header -->
                    <Border BackgroundColor="{StaticResource Gray600}"
                            StrokeThickness="0"
                            Padding="16">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="&#x2139;&#xFE0F;"
                                   FontSize="18"
                                   VerticalOptions="Center" />
                            <Label Text="Om appen"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center"
                                   TextColor="{StaticResource White}" />
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Divider -->
                    <BoxView HeightRequest="1"
                             Color="{StaticResource Gray600}" />

                    <!-- Card Body -->
                    <VerticalStackLayout Padding="16" Spacing="8">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="&#x1F3AF;"
                                   FontSize="24"
                                   VerticalOptions="Center" />
                            <Label Text="HPSK Mobile"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center"
                                   TextColor="{StaticResource White}" />
                        </HorizontalStackLayout>

                        <Label Text="Traningsmatch-app for HPSK-medlemmar"
                               FontSize="13"
                               TextColor="{StaticResource Gray300}" />

                        <HorizontalStackLayout Spacing="8" Margin="0,8,0,0">
                            <Border StrokeShape="RoundRectangle 4"
                                    Stroke="Transparent"
                                    BackgroundColor="{StaticResource Primary}"
                                    Padding="8,4">
                                <Label Text="{Binding AppVersion}"
                                       FontSize="12"
                                       FontAttributes="Bold"
                                       TextColor="White" />
                            </Border>
                            <Label Text=".NET MAUI"
                                   FontSize="12"
                                   VerticalOptions="Center"
                                   TextColor="{StaticResource Gray400}" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
